/*
 * Last modified time :2018-01-11
 */
var cum_Modalindex_=0;var cum_ModalValobj=null;function cumCurWinModal(d,c,a,f){var e=a||window;var h={area:["90%","80%"],scrollbar:false,ismax:false,callid:"",callback:{},cancel:null,end:null,helpBtn:false,type:2,other:{},success:null};if(typeof f!=="undefined"){$.extend(h,f)}var g=h.area;if(g[0]&&g[0].toLowerCase().indexOf("px")&&parseInt(g[0])>e.$(window).width()){g[0]="100%"}if(g[1]&&g[1].toLowerCase().indexOf("px")&&parseInt(g[1])>e.$(window).height()){g[1]="100%"}if(h.type==2){COM_TOOLS.setCacheFnForChildWin()}var b=e.layer.open($.extend({type:h.type,title:d,area:h.area,content:c,scrollbar:(h.scrollbar&&!e.$("html").attr("layer-full"))?false:true,maxmin:h.ismax,helpBtn:h.helpBtn,resize:false,zIndex:e.layer.zIndex,success:function(i,l){if(h.type==2){var k=e[i.find("iframe")[0]["name"]];if(h.callid){k.cum_ModalValobj=h.callid}if(!$.isEmptyObject(h.callback)&&$.type(h.callback)=="object"){if(!h.callid){k.cum_ModalValobj="no_nodeid"}k.COM_TOOLS.cache_obj._ptWinFnNames=h.callback}if(window.name&&(window.name!="welPiframe"&&window.name.indexOf("mainPiframe")!=0)){var j=e.layer.getFrameIndex(window.name);if(j){k.cum_Modalindex_=j}}else{k.cum_Modalindex_=-1}}$.isFunction(h.success)&&h.success(i,l)},cancel:h.cancel,end:h.end},h.other));return b}function cumParentWinModal(b,a,c){return cumCurWinModal(b,a,parent,$.extend({ismax:true},c))}function cumParentCallValue(a,c){var b=parent.layer.getFrameIndex(window.name);if(typeof(a)==="function"){a()}cumCloseWin(b,c,parent)}function cumCloseWin(b,c,a){(a||window).layer.close(b,c)}function cumGetParentWinGlobel(a){if(cum_Modalindex_>0){return(a||parent).window["layui-layer-iframe"+cum_Modalindex_]}else{if((a||parent)==top&&top.$(".js-iframe-comwin").length>0){return top.window[top.$(".js-iframe-comwin:visible").attr("name")]}else{return(a||parent)}}}function cumGetParentBodyGlobel(a){if(cum_Modalindex_>0){return(a||parent).layer.getChildFrame("body",cum_Modalindex_)}else{if((a||parent)==top&&top.$(".js-iframe-comwin").length>0){return top.window[top.$(".js-iframe-comwin:visible").attr("name")].document.body}else{return(a||parent).document.body}}}function resizeIframeHeight(){}function intValidateOption(){}function cus_dt_ajaxdata(c,b){var a={};a.draw=c.draw;a.pageSize=c.length;a.start=c.start;if(!$.isEmptyObject(b)){return $.extend({},b,a)}else{return a}}function select_add(c,f,b,a){var e=$("#"+c);e.empty();var d=[];$.each(f,function(g,h){d.push('<option value="',h[b],'">',h[a],"</option>")});e.append(d.join(""))}function select_option_init(c,b,d,f,e,a){$.ajax({type:"post",url:c,data:a,success:function(h,g){if(h.result==1){select_add(d,h[b],f,e)}else{COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noData"])}},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.networkError"])}})}$(function(){COM_TOOLS._isOpenHelpMsg.helpBtn&&$(document).on("click",".js-helpbtn",function(a){var c=$(this),b=c.data("helpbtn");if(c.is('[id="js_cushelpbtn"]')){b="#"+($.hash().get("pathid")||"")}if(b){c.attr({href:b.substr(0,1)=="#"?COM_TOOLS._helpPage+b:b,target:"cushelppage"})}else{return false}a.stopPropagation()});COM_TOOLS._isOpenHelpMsg.helpMsgTips&&$(document).popover({selector:'.js-helpmsg[data-titlemsg="true"],.js-helpmsg:not(:text)',placement:"auto",trigger:"hover",container:"body",content:function(){var a=$(this).data("helpdata");a=a?a.toString().split(","):[];return TEDU_MESSAGE.get($(this).data("helpmsg"),a)}})});var TEDU_MESSAGE=function(){var a={};a.format=function(b,c){if(c===undefined){return b}if(c.constructor!==Array){c=[c]}$.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return b};a.get=function(b,d,c){c="zh-CN";if(typeof LOCAL_MESSAGE_DATA!="undefined"){return LOCAL_MESSAGE_DATA[b]?(a.format(LOCAL_MESSAGE_DATA[b],d)||""):""}return""};return a}();var TEDU_LANGUAGE={_dataTable:{"zh-CN":{processing:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.processing"],lengthMenu:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.lengthMenu"],zeroRecords:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.zeroRecords"],info:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.info"],infoEmpty:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.infoEmpty"],infoFiltered:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.infoFiltered"],infoPostFix:"",search:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.search"],url:"",emptyTable:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.emptyTable"],loadingRecords:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.loadingRecords"],infoThousands:",",paginate:{first:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_first"],previous:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_previous"],next:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_next"],last:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.paginate_last"]},aria:{sortAscending:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.sortAscending"],sortDescending:LOCAL_MESSAGE_DATA["platform.plugin.dataTable.sortDescending"]}}},_validate:function(){var a="platform.plugin.validate.";return($.validator&&{"zh-CN":{required:LOCAL_MESSAGE_DATA[a+"required"],remote:LOCAL_MESSAGE_DATA[a+"remote"],email:LOCAL_MESSAGE_DATA[a+"email"],url:LOCAL_MESSAGE_DATA[a+"url"],date:LOCAL_MESSAGE_DATA[a+"date"],dateISO:LOCAL_MESSAGE_DATA[a+"dateISO"],number:LOCAL_MESSAGE_DATA[a+"number"],digits:LOCAL_MESSAGE_DATA[a+"digits"],creditcard:LOCAL_MESSAGE_DATA[a+"creditcard"],equalTo:LOCAL_MESSAGE_DATA[a+"equalTo"],extension:LOCAL_MESSAGE_DATA[a+"extension"],maxlength:$.validator.format(LOCAL_MESSAGE_DATA[a+"maxlength"]),minlength:$.validator.format(LOCAL_MESSAGE_DATA[a+"minlength"]),rangelength:$.validator.format(LOCAL_MESSAGE_DATA[a+"rangelength"]),range:$.validator.format(LOCAL_MESSAGE_DATA[a+"range"]),max:$.validator.format(LOCAL_MESSAGE_DATA[a+"max"]),min:$.validator.format(LOCAL_MESSAGE_DATA[a+"min"])}})},_select2:function(){if(jQuery.fn.select2&&jQuery.fn.select2.amd){var b=jQuery.fn.select2.amd;var a="platform.plugin.select2.";return b.define("select2/i18n/zh-CN",[],function(){return{errorLoading:function(){return LOCAL_MESSAGE_DATA[a+"errorLoading"]},inputTooLong:function(d){var c=d.input.length-d.maximum;return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA[a+"inputTooLong"],[c])},inputTooShort:function(d){var c=d.minimum-d.input.length;return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA[a+"inputTooShort"],[c])},loadingMore:function(){return LOCAL_MESSAGE_DATA[a+"loadingMore"]},maximumSelected:function(c){return TEDU_MESSAGE.format(LOCAL_MESSAGE_DATA[a+"maximumSelected"],[c.maximum])},noResults:function(){return LOCAL_MESSAGE_DATA[a+"noResults"]},searching:function(){return LOCAL_MESSAGE_DATA[a+"searching"]}}}),{define:b.define,require:b.require}}},_datetimepicker:function(){var a="platform.plugin.datetimepicker.";return{"zh-CN":{days:[LOCAL_MESSAGE_DATA[a+"sunday"],LOCAL_MESSAGE_DATA[a+"monday"],LOCAL_MESSAGE_DATA[a+"tuesday"],LOCAL_MESSAGE_DATA[a+"wednesday"],LOCAL_MESSAGE_DATA[a+"thursday"],LOCAL_MESSAGE_DATA[a+"friday"],LOCAL_MESSAGE_DATA[a+"saturday"],LOCAL_MESSAGE_DATA[a+"sunday"]],daysShort:[LOCAL_MESSAGE_DATA[a+"sun"],LOCAL_MESSAGE_DATA[a+"mon"],LOCAL_MESSAGE_DATA[a+"tue"],LOCAL_MESSAGE_DATA[a+"wed"],LOCAL_MESSAGE_DATA[a+"thu"],LOCAL_MESSAGE_DATA[a+"fri"],LOCAL_MESSAGE_DATA[a+"sat"],LOCAL_MESSAGE_DATA[a+"sun"]],daysMin:[LOCAL_MESSAGE_DATA[a+"s"],LOCAL_MESSAGE_DATA[a+"m"],LOCAL_MESSAGE_DATA[a+"t"],LOCAL_MESSAGE_DATA[a+"w"],LOCAL_MESSAGE_DATA[a+"th"],LOCAL_MESSAGE_DATA[a+"f"],LOCAL_MESSAGE_DATA[a+"sa"],LOCAL_MESSAGE_DATA[a+"s"]],months:[LOCAL_MESSAGE_DATA[a+"jan"],LOCAL_MESSAGE_DATA[a+"feb"],LOCAL_MESSAGE_DATA[a+"mar"],LOCAL_MESSAGE_DATA[a+"apr"],LOCAL_MESSAGE_DATA[a+"may"],LOCAL_MESSAGE_DATA[a+"jun"],LOCAL_MESSAGE_DATA[a+"jul"],LOCAL_MESSAGE_DATA[a+"aug"],LOCAL_MESSAGE_DATA[a+"sep"],LOCAL_MESSAGE_DATA[a+"oct"],LOCAL_MESSAGE_DATA[a+"nov"],LOCAL_MESSAGE_DATA[a+"dec"]],monthsShort:[LOCAL_MESSAGE_DATA[a+"short_jan"],LOCAL_MESSAGE_DATA[a+"short_feb"],LOCAL_MESSAGE_DATA[a+"short_mar"],LOCAL_MESSAGE_DATA[a+"short_apr"],LOCAL_MESSAGE_DATA[a+"short_may"],LOCAL_MESSAGE_DATA[a+"short_jun"],LOCAL_MESSAGE_DATA[a+"short_jul"],LOCAL_MESSAGE_DATA[a+"short_aug"],LOCAL_MESSAGE_DATA[a+"short_sep"],LOCAL_MESSAGE_DATA[a+"short_oct"],LOCAL_MESSAGE_DATA[a+"short_nov"],LOCAL_MESSAGE_DATA[a+"short_dec"]],today:LOCAL_MESSAGE_DATA[a+"today"],clear:LOCAL_MESSAGE_DATA[a+"clear"],suffix:[],meridiem:[LOCAL_MESSAGE_DATA[a+"am"],LOCAL_MESSAGE_DATA[a+"pm"]],format:LOCAL_MESSAGE_DATA[a+"format"],weekStart:1}}}()};var CUS_PLUGINS={_DT_:{"pager.simple_numbers_no_totalpage":function(e,a){var b=[];var c=$.fn.DataTable.ext.pager.numbers_length;var d=Math.floor(c/2);var f=function(g,l){var h;if(typeof l==="undefined"){l=0;h=g}else{h=l;l=g}var j=[];for(var k=l;k<h;k++){j.push(k)}return j};if(a<=c){b=f(0,a)}else{if(e<=d){b=f(0,c-1);b.push("ellipsis")}else{if(e>=a-1-d){b=f(a-(c-2),a);b.splice(0,0,"ellipsis");b.splice(0,0,0)}else{b=f(e-d+2,e+d);b.push("ellipsis");b.splice(0,0,"ellipsis");b.splice(0,0,0)}}}b.DT_el="span";return["previous",b,"next"]},init:function(){$.fn.DataTable.ext.pager.simple_numbers_no_totalpage=this["pager.simple_numbers_no_totalpage"]}},_VALID_:{applyTooltipOptions:function(c,a){var d=$.fn.tooltip.Constructor.DEFAULTS;var b={animation:c.data("animation")||false,html:c.data("html")||d.html,placement:c.data("placement")||d.placement,selector:c.data("selector")||d.selector,trigger:$.trim("manual "+(c.data("trigger")||"")),delay:c.data("delay")||d.delay,container:c.data("container")||d.container,template:'<div class="tooltip cus-tooltip-error" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'};if(a&&a._all_){$.extend(b,a._all_)}if(a&&a[c.attr("name")]){$.extend(b,a[c.attr("name")])}return b},init:function(){var a=this;$.validator.setDefaults({normalizer:function(b){return $.trim(b)},success:function(b,c){$(c).tooltip("destroy")},errorPlacement:function(b,c){var e=$(c),d=a.applyTooltipOptions(e,this.settings.tooltip_options);d.title=d.html?b.html():b.text();if(e.data("bs.tooltip")!==undefined){e.data("bs.tooltip").options.title=d.title}else{e.tooltip(d)}e.tooltip("show")}})}}};var COM_TOOLS={_customMenus:6,_tabSingle:3,_webPath:"/",_tabHomePage:"index_default.html",_404Page:"404.html",_helpPage:"help.html",_language:"zh-CN",_isCheckBtn:false,_isOpenHelpMsg:{helpBtn:true,helpMsgTips:true,helpMsgDefVal:true},_isOpenNotice:{isDisplay:true,delayTime:5,requestTime:300},_isOpenSwitch:true,_jsFileList:{jstree:{js:"plugins/jsTree/jstree.min.js",css:"plugins/jsTree/style.min.css"},validator:{js:"plugins/validate/jquery.validate.custom.min.js",css:""},datetimepicker:{js:"plugins/datetimepicker/bootstrap-datetimepicker.min.js",css:"plugins/datetimepicker/bootstrap-datetimepicker.min.css"},select2:{js:"plugins/select2/select2.full.min.js",css:"plugins/select2/select2.min.css"},cropper:{js:"plugins/cropper/cropper.min.js",css:"plugins/cropper/cropper.min.css"},quicksearch:{js:"plugins/lou-multi-select/js/jquery.quicksearch.js",css:""},multiSelect:{js:"plugins/lou-multi-select/js/jquery.multi-select.js",css:""},jqueryZoom:{js:"plugins/jquery-zoom/jquery.zoom.min.js",css:""},echarts:{js:"plugins/echarts/echarts.min.js",css:""},icheck:{js:"plugins/iCheck/icheck.min.js",css:"plugins/iCheck/custom.css"},cusPinYin:{js:"pinyin.js",css:""},datatable:{js:"plugins/datatables/datatables.min.js",css:"plugins/dataTables/datatables.min.css"},mCustomScrollbar:{js:"plugins/customScrollbar/jquery.mCustomScrollbar.concat.min.js",css:"plugins/customScrollbar/jquery.mCustomScrollbar.min.css"}},initjSDefaultOpt:function(a,b){if(!a){return false}(a=="ALL"||$.inArray("DTmain",a)!==-1)&&$.fn.dataTable&&(CUS_PLUGINS._DT_.init(),$.extend($.fn.dataTable.defaults,{scrollX:true,paging:true,pageLength:11,lengthChange:false,ordering:false,searching:false,serverSide:true,processing:true,language:TEDU_LANGUAGE._dataTable[COM_TOOLS._language],fnPreDrawCallback:function(c){$(c.nTableWrapper).find(".cus-checkbox-all").removeClass("cus-checked")}}));(a=="ALL"||$.inArray("jstree",a)!==-1)&&$.jstree&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj["_jsfileArr"],"jstree"),$.jstree.root="0");(a=="ALL"||$.inArray("validator",a)!==-1)&&$.validator&&(CUS_PLUGINS._VALID_.init(),$.extend($.validator.messages,TEDU_LANGUAGE._validate()[COM_TOOLS._language]),COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj["_jsfileArr"],"validator"));(a=="ALL"||$.inArray("datetimepicker",a)!==-1)&&$.fn.datetimepicker&&(COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj["_jsfileArr"],"datetimepicker"),$.fn.datetimepicker.dates["cus-lang"]=TEDU_LANGUAGE._datetimepicker[COM_TOOLS._language],$.fn.datetimepicker.defaults={language:"cus-lang",minView:2,todayBtn:true,autoclose:true,pickerPosition:"bottom-left",clearBtn:true,forceParse:false});(a=="ALL"||$.inArray("select2",a)!==-1)&&$.fn.select2&&(TEDU_LANGUAGE._select2(),$.fn.select2.defaults.set("language",COM_TOOLS._language),$.fn.select2.defaults.set("width","style"),COM_TOOLS.arrayUniquePushFn(COM_TOOLS.cache_obj["_jsfileArr"],"select2"));!b&&COM_TOOLS.fnInitInputHelpVal()},_data:{WEEKDAYS_:[],PLAYDAYS_:[]},private_obj_:{},cache_obj:{_jsfileArr:[],_ptWinFnNames:{},_ptWinFnList:{}},_jsPath:function(){var a=document.currentScript?document.currentScript.src:function(){var d=document.scripts,c=d.length-1,e;for(var b=c;b>0;b--){if(d[b].readyState==="interactive"){e=d[b].src;break}}return e||d[c].src}();return a.substring(0,a.lastIndexOf("/")+1)}(),localStorageSupport:function(){return(("localStorage" in window)&&window.localStorage!==null)},save_toLocal:function(a,b){localStorage.setItem(a,JSON.stringify(b))},get_fromLocal:function(a){return localStorage.getItem(a)},sessionStorageSupport:function(){return(("sessionStorage" in window)&&window.sessionStorage!==null)},save_toSession:function(a,b){sessionStorage.setItem(a,JSON.stringify(b))},get_fromSession:function(a){return sessionStorage.getItem(a)},requestParam:function(d){var b=location.search;var g=b.indexOf("?");if(g===-1){return""}var f=b.substr(g+1);var c=f.split("&");for(var a=0;a<c.length;a++){var h=c[a].split("=");if(h[0].toUpperCase()==d.toUpperCase()){if(a===c.length-1){var e=h[1].indexOf("#");if(e!==-1){h[1]=h[1].substring(0,e)}}return h[1]}}return""},serializeObject:function(a){var c={},b=$(a).serializeArray();$.each(b,function(d,e){if(c[e.name]){c[e.name]=c[e.name]+","+$.trim(e.value)}else{c[e.name]=$.trim(e.value)}});return c},get_random_fun:function(a){var b="";for(var c=0;c<a;c++){b+=Math.floor(Math.random()*10)}return b},is_playerDay:function(a){var b=moment(a).day();return((b==0||b==6||$.inArray(a,COM_TOOLS._data.PLAYDAYS_)!=-1)&&$.inArray(a,COM_TOOLS._data.WEEKDAYS_)==-1)},get_nextWeekDay:function(a){if(COM_TOOLS.is_playerDay(a)){a=moment(a).add(1,"days").format("YYYY-MM-DD");return arguments.callee(a)}else{return moment(a).format("YYYY-MM-DD")}},DT_init:function(d,e,a,k,f,c){var h={},i={},g=$.type(a)=="string";var j=$.type(f)=="object"?f:{};if(g){i={ajax:{url:a,type:k||"get",dataSrc:function(l){if(l&&l.isFilterTag==0){l.recordsTotal=0;l.recordsFiltered=0;return[]}return l.data},data:function(l){return cus_dt_ajaxdata(l,j)}}}}else{i={data:a,serverSide:false,processing:false};c=k}c=$.type(c)=="object"?c:{};c.other=$.type(c.other)=="object"?c.other:{};var b=$("#"+d).DataTable($.extend(true,{columns:e,initComplete:function(p,o){var n=this.api();if(p._select&&p._select.style=="mutil"){$(p.nTableWrapper).off("click.dtcus",".cus-checkbox-all").on("click.dtcus",".cus-checkbox-all",function(){if($(this).hasClass("cus-checked")){$(this).removeClass("cus-checked");n.rows().deselect()}else{$(this).addClass("cus-checked");n.rows().select()}});n.off("select.dt.dtcus deselect.dt.dtcus").on("select.dt.dtcus deselect.dt.dtcus",function(u,t,s,r){if(t){$(p.nTableWrapper).find(".cus-checkbox-all").toggleClass("cus-checked",t.rows({selected:true}).count()==t.rows().count())}})}if($.isFunction(c.jsTrDblclick)){var q=null,m,l;$(p.nTBody).off("dblclick.dtcus touchstart.dtcus touchmove.dtcus touchend.dtcus","tr").on({"dblclick.dtcus":function(){c.jsTrDblclick(COM_TOOLS.DT_getRowsSourceData(n,this)[0],$(this))},"touchstart.dtcus":function(r){if(!r.originalEvent||!r.originalEvent.changedTouches||!r.originalEvent.changedTouches[0]){return}m=r.originalEvent.changedTouches[0].clientX;l=r.originalEvent.changedTouches[0].clientY;q=setTimeout(function(){$(r.currentTarget).trigger("dblclick.dtcus")},750)},"touchmove.dtcus":function(r){if(q&&r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(Math.abs(m-r.originalEvent.changedTouches[0].clientX)>50||Math.abs(l-r.originalEvent.changedTouches[0].clientY)>50)){clearTimeout(q)}},"touchend.dtcus":function(r){if(q){clearTimeout(q)}}},"tr").off("dblclick.dtcus",".select-checkbox, :input, .no-Sel-obj").on("dblclick.dtcus",".select-checkbox, :input, .no-Sel-obj",function(){return false})}if($.isFunction(c.jsInitComplete)){c.jsInitComplete.call(n,p,o)}},drawCallback:function(l){if($.isFunction(c.jsDrawCallback)){c.jsDrawCallback.call(this.api(),l)}},select:{style:c.selectStyle||"mutil",selector:"td:not(td:has(:input))",info:false}},i,c.other));h.table=b;h.setAjaxData=function(m,l){if($.type(m)=="object"){j=m;if(!l){COM_TOOLS.DT_ajaxReload(b)}}};h.getAjaxData=function(){return j};h.getSelectRowsData=function(l){return COM_TOOLS.DT_getSelectRowsSourceData(b,l)};return h},DT_getSelectRows:function(a){return COM_TOOLS.DT_getSelectRowsData(a,"itemid")},DT_getSelectRowsData:function(b,a){var c=[];if($.type(a)==="string"){b.rows(".selected").nodes().to$().each(function(){c.push($(this).data(a))})}else{b.rows(".selected").nodes().to$().each(function(){c.push($(this).data())})}return c},DT_getSelectRowsSourceData:function(c,a,b){return COM_TOOLS.DT_getRowsSourceData(c,(b===true?"":".selected"),a)},DT_getRowsSourceData:function(c,a,b){var d=[];if($.type(b)==="string"){c.rows(a||"").every(function(){d.push(this.data()[b])})}else{c.rows(a||"").every(function(){d.push(this.data())})}return d},DT_getColumnSum:function(d,b,a){var c=[];d.columns(b).every(function(e){var g=this.data().reduce(function(i,h){return COM_TOOLS.fnFloatSum(i,h)},0);if(a){$(this.footer()).html(g)}var f={};f[d.column(e).dataSrc()]=g;c.push(f)});return c},DT_getSelectRowsInputData:function(c,a){var b=[];c.rows((a===true?"":".selected")).nodes().to$().each(function(){var d={};d.id=$(this).data("itemid");$(this).find(".js-getval").each(function(e){if($(this).attr("name")){d[$(this).attr("name")]=$(this).val()}});b.push(d)});return b},DT_tdToinpEdit:function(c,a){var b=c.rows(".selected").nodes().to$();if(!b.length){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noSelrows"]);return false}c.columns(a).nodes().to$().each(function(d,e){$(this).filter(function(f,g){return $(this).parent().hasClass("selected")}).each(function(g,i){if(!$(this).children().is("input.js-getval")){var f=$(this).text();var h=$("<input name='"+a[d].split(":")[0]+"' class='input-sm js-getval no-Sel-obj' type='text'>");h.val(f);$(this).html(h)}})})},DT_inpTotdSave:function(b,a,d){var c="";if(!b.rows(".selected").nodes().to$().find("input[name="+a[0].split(":")[0]+"]").length){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.plugin.msg.noSelrows"])}else{c=COM_TOOLS.DT_getSelectRowsInputData(b);if(d!=false){b.columns(a).nodes().to$().each(function(e,f){$(this).filter(function(h,g){return $(this).parent().hasClass("selected")}).each(function(i,h){if($(this).children().is("input.js-getval")){var g=$(this).children().val();b.cell(h).data(g)}})})}}return c},DT_getInputSum:function(d,a,c){var b=0;d.columns(a).nodes().to$().each(function(e,f){$(this).filter(function(g,h){return c||$(this).parent().hasClass("selected")}).each(function(g,h){if($(this).children().is("input[type=text]")){b=COM_TOOLS.fnFloatSum(b,$(this).children().val())}})});return b},DT_getCurPageIndex:function(c,b){var a=c.page()||0;if(b){COM_TOOLS.private_obj_.pageIndex=a}return a},DT_setCurPageIndex:function(c,b){var a=b||COM_TOOLS.private_obj_.pageIndex||0;c.page(parseInt(a)).draw(false);COM_TOOLS.private_obj_.pageIndex=0},DT_ajaxReload:function(a,c,d){var b={cb:null,rp:true};typeof(c)=="boolean"&&(b.rp=c);typeof(d)=="function"&&(b.cb=d);a.ajax.reload(b.cb,b.rp)},DT_checkboxReset:function(a){$(a.table().container()).find(".cus-checkbox-all").removeClass("cus-checked")},DT_getNode:function(b,a){if(/body|footer|header|node|container/.test(a)){return b.table()[a]()}return""},select2_init:function(b,a,k,j,c){c=$.type(c)=="object"?c:{};var f={iscache:true,multiple:false,ispinyi:false,initValue:"",drawCallBack:function(){},other:{}};c=$.type(a)=="object"?a:c;$.extend(true,f,c);var h={};h.select2=$("#"+b);var e={};if($.type(a)=="string"){k=k||"get";if(f.iscache){$.ajax({type:k,url:a,data:$.type(j)=="function"?j("",""):{},dataType:"json",success:function(l){if(l){if(f.ispinyi){$.fn.select2.amd.require(["select2/compat/matcher"],function(m){h.select2.select2($.extend(true,{multiple:f.multiple,data:l.isFilterTag==0?[]:l.results,matcher:m(d)},f.other))})}else{h.select2.select2($.extend(true,{multiple:f.multiple,data:l.isFilterTag==0?[]:l.results},f.other))}f.initValue!=""&&h.setVal(f.initValue);f.drawCallBack()}}})}else{var i={multiple:f.multiple,ajax:{url:a,dataType:"json",delay:250,processResults:function(l){if(l&&l.isFilterTag==0){return{results:[]}}else{return l}},data:function(l){if($.type(j)=="function"){return j(l.term,l)}return{q:l.term}}},minimumInputLength:1,placeholder:LOCAL_MESSAGE_DATA["platform.plugin.msg.enterSearch"]};h.select2.select2($.extend(true,i,f.other))}}else{if(f.ispinyi){$.fn.select2.amd.require(["select2/compat/matcher"],function(l){h.select2.select2($.extend(true,{multiple:f.multiple,matcher:l(d)},f.other))})}else{h.select2.select2($.extend(true,{multiple:f.multiple},f.other))}f.initValue!=""&&h.setVal(f.initValue);f.drawCallBack()}var g=$.Callbacks();h.select2.on("select2:select select2:unselect",function(l){$(this).trigger("focusout.validate");g.fire(l.params.data.id,l.params.data.text,l.params.data)});h.setVal=function(l){h.select2.val(l).trigger("change.select2")};h.getVal=function(){return h.select2.val()};h.updateOption=function(l){h.select2.html(l).trigger("change.select2")};h.changeCallback=function(l){$.type(l)=="function"&&g.add(l)};if(f.ispinyi){COM_TOOLS.requireJsFn(["cusPinYin"],[],function(){})}function d(l,m){if(m.toPinYin!=undefined){return m.toPinYin().indexOf(l.toUpperCase())>=0?true:m.toUpperCase().indexOf(l.toUpperCase())>=0}return m.toUpperCase().indexOf(l.toUpperCase())>=0}return h},alert:function(b,a){return layer.msg(b||"",$.extend({zIndex:layer.zIndex},a))},confirm:function(d,a,c,b){var e="function"==typeof a;return e&&(b=c,c=a),layer.confirm(d||"",$.extend({zIndex:layer.zIndex,btn:[LOCAL_MESSAGE_DATA["platform.common.btn.confirm"],LOCAL_MESSAGE_DATA["platform.common.btn.cancel"]],title:LOCAL_MESSAGE_DATA["platform.common.label.message"]},(e?{}:a)),c,b)},formatMoney:function(f,d,g,h,a){f=f||0;d=!isNaN(d=Math.abs(d))?d:2;g=g!==undefined?g:"￥";h=h||",";a=a||".";var c=f<0?"-":"",e=parseInt(f=Math.abs(+f||0).toFixed(d),10)+"",b=(b=e.length)>3?b%3:0;return g+c+(b?e.substr(0,b)+h:"")+e.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+h)+(d?a+Math.abs(f-e).toFixed(d).slice(2):"")},requireJsFn:function(b,d,a){var c={};c.loadFile=function(e,g){if(COM_TOOLS._jsFileList[e]["js"]){$.ajax({type:"get",url:COM_TOOLS._jsPath+COM_TOOLS._jsFileList[e]["js"],dataType:"script",cache:true,success:function(){COM_TOOLS.cache_obj._jsfileArr.push(e);g&&g()},error:function(){COM_TOOLS.alert(LOCAL_MESSAGE_DATA["platform.common.msg.1102"])}})}if(COM_TOOLS._jsFileList[e]["css"]){if(!c.checkCssIsLoad(COM_TOOLS._jsFileList[e]["css"])){var f=$("#cus_app_link");if(f.length==0){f=$('head link[rel="stylesheet"]').filter(function(){return $(this).attr("href").indexOf("css/style.css")!=-1})}f.before($('<link rel="stylesheet" type="text/css" href="'+COM_TOOLS._jsPath.replace("/js/","/css/")+COM_TOOLS._jsFileList[e]["css"]+'"/>'))}}};c.checkCssIsLoad=function(e){return !!$('head link[rel="stylesheet"]').filter(function(){return e.substring(e.indexOf("css/"))==$(this).attr("href").substring($(this).attr("href").indexOf("css/"))}).length};c.forCheck=function(h,e){for(var f=0,g=h.length;f<g;f++){if(COM_TOOLS._jsFileList[h[f]]&&$.inArray(h[f],COM_TOOLS.cache_obj._jsfileArr)===-1){e&&e(h[f])}}};c.ready_check=function(g){for(var f=0,e=g.length;f<e;f++){if(COM_TOOLS._jsFileList[g[f]]&&$.inArray(g[f],COM_TOOLS.cache_obj._jsfileArr)===-1){return false}}return true};c.fn1=function(){c.forCheck(b,function(e){c.loadFile(e,function(){if(c.ready_check(b)){a&&window.setTimeout(function(){COM_TOOLS.initjSDefaultOpt(b.concat(d)||"ALL",true);a()},4)}})})};if(jQuery.type(d)==="array"&&d.length>0&&!c.ready_check(d)){c.forCheck(d,function(e){c.loadFile(e,function(){if(c.ready_check(d)){if(jQuery.type(b)==="array"&&b.length>0&&!c.ready_check(b)){c.fn1()}else{a&&a()}}})})}else{if(jQuery.type(b)==="array"&&b.length>0&&!c.ready_check(b)){c.fn1()}else{a&&a()}}},fnTabPage:function(f,e,d){var c={};if(jQuery.type(f)==="string"){var b=$("#"+f);if(!b.data("inited")){b.data("inited",true);var a=b.find('a[data-toggle="tab"]').on("shown.bs.tab",function(m,l){var j=$(m.target),i=j.attr("aria-controls"),k=$.trim(j.data("itemurl")),g=$("#"+i),h=j.data("itemcallback");if(k){if(g.length>0&&(j.is("[data-isreload=true]")||l=="API"||$.trim(g.html()).length<10)){COM_TOOLS.private_obj_._curTabPageid=i;e&&e();g.load(k,function(){h&&COM_TOOLS.private_obj_[h]();d&&d();COM_TOOLS.fnInitInputHelpVal()})}}else{h&&COM_TOOLS.private_obj_[h]()}$(window).trigger("resize")});$.trim(a.eq(0).data("itemurl"))&&a.eq(0).trigger("shown.bs.tab",["API"])}c.reloadOneTab=function(g){if(g){var h=$("#"+f+' a[data-toggle="tab"][href="'+g+'"]');$.trim(h.data("itemurl"))&&h.trigger("shown.bs.tab",["API"])}}}return c},fnFloatSum:function(f,d){var c,b,a;try{c=f.toString().split(".")[1].length}catch(g){c=0}try{b=d.toString().split(".")[1].length}catch(g){b=0}a=Math.pow(10,Math.max(c,b));return(f*a+d*a)/a},fnInitInputHelpVal:function(a){COM_TOOLS._isOpenHelpMsg.helpMsgDefVal&&window.setTimeout(function(){$('.js-helpmsg:text[data-titlemsg!="true"][placeholder!=""]').attr("placeholder",function(c,b){var d=$(this).data("helpdata");d=d?d.toString().split(","):[];return TEDU_MESSAGE.get($(this).data("helpmsg"),d)||b})},(jQuery.type(a)==="number")?a:300)},callParentWinFn:function(c,b){if(c){if(COM_TOOLS.cache_obj._ptWinFnNames[c]){var a=cumGetParentWinGlobel();if(a.COM_TOOLS.private_obj_[COM_TOOLS.cache_obj._ptWinFnNames[c]]){a.COM_TOOLS.private_obj_[COM_TOOLS.cache_obj._ptWinFnNames[c]](b)}}}},callParentWinCacheFn:function(c,b){if(c){if(COM_TOOLS.cache_obj._ptWinFnNames[c]){if($.type(COM_TOOLS.cache_obj._ptWinFnNames[c])=="function"){COM_TOOLS.cache_obj._ptWinFnNames[c](b)}else{var a=cumGetParentWinGlobel();if(a.COM_TOOLS.cache_obj._ptWinFnList[COM_TOOLS.cache_obj._ptWinFnNames[c]]){a.COM_TOOLS.cache_obj._ptWinFnList[COM_TOOLS.cache_obj._ptWinFnNames[c]](b)}}}}},setCacheFnForChildWin:function(a){if(!$.isEmptyObject(a)){COM_TOOLS.cache_obj._ptWinFnList=a}else{COM_TOOLS.cache_obj._ptWinFnList={}}},eChartsTools:function(){var c={};function b(i,h,g,e){var f={dnames:[],series:[],legends:[]},g=g||i.data("js_fopt")||{},e=e||i.data("js_dopt")||{},j=true;$.each(h||[],function(k,o){var l=$.extend(true,{},o,{})["data"];$.each(l||[],function(q,p){var n=e[p.name]?e[p.name]:p.name;l[q]["name"]=n;if(j){f.dnames.push(n)}});j=false;var m=$.extend(true,{},g[o.cname],{})||{};m.data=l;f.series.push(m);f.legends.push(m.name)});return f}function d(l,i,k,j,e,g){var f={};var h=b(l,k,j,e);f.series=h.series;var i=i||l.data("js_type");if(i=="bar"||i=="line"){f.yAxis={type:"value"};f.xAxis={data:h.dnames};f.tooltip={trigger:"axis"};f.legend={data:h.legends}}else{if(i=="pie"||i=="funnel"){f.tooltip={trigger:"item"};f.legend={data:h.dnames}}}return $.extend(true,f,(g||l.data("js_opt")||{}))}function a(j,f,i,l,k,e,h){var g={};if($.type(l)=="array"){g=d(j,i,l,k,e,h);f.setOption(g)}else{if($.type(l)=="string"){f.showLoading();$.ajax({type:l.split("||")[1]||"get",url:l.split("||")[0],async:true,dataType:"json",success:function(m){f.hideLoading();g=d(j,i,m,k,e,h);f.setOption(g)}})}else{console.log("error")}}}c.initOpt=function(l,i,k,j,e,g){var h=$(l);var f=echarts.init(h[0]);h.data({js_type:i,js_fopt:j,js_dopt:e,js_opt:g});a(h,f,i,k,j,e,g);return f};c.updateData=function(g,f){var e=$(g);a(e,echarts.getInstanceByDom(e[0]),false,f,false,false,false)};return c}(),infoTipsFn:function(a,c,e,b){var d={hideTime_:300,showTime_:400,html:true,imageZoom:false,placement:"left",trigger:"manual",container:"body",maxHeight:"",maxWidth:"276px",height:"",title:"",content:function(){var f=e?e($(this)):"";if(/<img[^>]*/.test(f)){d.height=d.maxHeight?d.maxHeight:$(window).height()*(/left|right/.test(d.placement)?0.5:0.4)+"px"}return f}};$.extend(d,(b||{}));d.template='<div class="popover cus-popover-box" role="tooltip" style="max-width:'+(d.maxWidth)+";"+(d.imageZoom?"width:"+(d.maxWidth)+";":"")+'"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content" style="'+(d.maxHeight?"max-height:"+d.maxHeight+";":"")+'"></div></div>';d.imageZoom&&COM_TOOLS.requireJsFn(["jqueryZoom"],[],false);$(a).on("mouseleave",c,function(h){var i=$(this);var g=i.data("show_timer");if(g){window.clearTimeout(g)}var f=window.setTimeout(function(){i.popover("destroy").removeClass("js-mouseove").off("shown.bs.popover")},d.hideTime_);i.data("hide_timer",f);return false}).on("mouseenter",c,function(h){var i=$(this);var f=i.data("hide_timer");if(f){window.clearTimeout(f)}if(!i.hasClass("js-mouseove")){var g=window.setTimeout(function(){i.on("inserted.bs.popover",function(){$("#"+i.attr("aria-describedby")).children(".popover-content").css({height:d.height,"max-height":"auto"})}).on("shown.bs.popover",function(){if(d.imageZoom){$("#"+i.attr("aria-describedby")).find("img").wrap('<span class="img-zoom-box"></span>').css("display","block").parent().zoom()}});var j=i.addClass("js-mouseove").popover(d).popover("show").attr("aria-describedby");$("#"+j).on("mouseenter",function(k){var l=i.data("hide_timer");if(l){window.clearTimeout(l)}return false}).on("mouseleave",function(k){i.popover("destroy").removeClass("js-mouseove").off("shown.bs.popover");return false})},d.showTime_);i.data("show_timer",g)}return false})},loadingShade:{open:function(b,a){layer.load(1,{time:(b||0)*1000,shade:a||[0.5],zIndex:layer.zIndex})},close:function(){layer.closeAll("loading")}},loadingBtn:{createLabel:function(a){a.wrapInner('<span class="cus-spinner-label"></span>')},createSpinner:function(c){var a=[];a.push('<div class="cus-spinner cus-spinner-fading-circle">');for(var b=1;b<=12;b++){a.push('<div class="cus-circle',b,' cus-circle"></div>')}a.push("</div>");c.append(a.join(""))},open:function(a){var b=$.type(a)=="string"?$("#"+a):a;b.addClass("cus-spinner-box").attr("data-loading","").prop("disabled",true);b.children(".cus-spinner-label").length==0&&this.createLabel(b);b.children(".cus-spinner").length==0&&this.createSpinner(b)},close:function(a){var b=$.type(a)=="string"?$("#"+a):a;b.removeAttr("data-loading").prop("disabled",false)}},customValid:{specialChars:function(b,c){var a=/[\-\_\,\!\|\~\`\(\)\#\$\%\^\&\*\{\}\:\;\"\<\>\?]/g;if(c!=undefined){a=new RegExp("[\\"+c.join("\\")+"]","g")}return a.test(b)}},arrayUniqueFn:function(g){var c=[],e,d,b,f={};for(e=0,b=g.length;e<b;e++){if(f[g[e]]===undefined){c.push(g[e]);f[g[e]]=true}}return c},arrayUniquePushFn:function(a,b){return $.inArray(b,a)===-1&&a.push(b)},arrayObjectSortBy:function(b,a,c){c=c||1;b.sort(function(e,d){e=e[a];d=d[a];if(e<d){return c*-1}if(e>d){return c*1}return 0})},cus_mult_choice:function(a,i,e,c,b){var j=$("#"+a),f=j.children(".cus-mult-choice"),h=c?$("#"+c):[],g=b?$("#"+b):[];j.on("click",".js-mult-remove",function(){$(this).closest(".mult-item").remove();h.length&&h.val(d.setHiddenValue("code"));g.length&&g.val(d.setHiddenValue("text"))}).on("click",".cus-mult-btn",function(){i&&i()});var d={addItem:function(l,k){if((e!="-1")&&f.find("span").length>=e){COM_TOOLS.alert("最多添加"+e+"个");return false}if(f.children("span").is("[data-code="+l+"]")){return false}f.append('<span data-text="'+k+'" data-code="'+l+'" class="mult-item">'+k+' <i class="glyphicon glyphicon-remove js-mult-remove"></i></span>');h.length&&h.val(d.setHiddenValue("code")).trigger("focusout.validate");g.length&&g.val(d.setHiddenValue("text"))},removeAll:function(){f.html("");h.length&&h.val("");g.length&&g.val("")},backfill:function(k,m){if((k!=null)&&k.length){var l=k.split(",");var n=m.split(",");var o=[];$.each(l,function(p,q){d.addItem(q,n[p])})}},getMultItem:function(l){var k=[],l=l||0;$.each(f.find("span"),function(m,o){k.push(l?$(o).data():$(o).data("code"))});return k},setHiddenValue:function(l){var k=[];$.each(f.find("span"),function(m,o){k.push($(o).data(l))});return k.join(",")}};return d},parseOjects:function(b){var a={};b=$.trim(b);if(b){if(b.substring(0,1)!="{"){b="{"+b+"}"}a=(new Function("return "+b))()}return a},parseArray:function(b){var a=[];b=$.trim(b);if(b!=""){if(b.substring(0,1)!="["){b="["+b+"]"}a=(new Function("return "+b))()}return a},ajaxFn:function(f,e,b){var d=(new Date()).getTime();var a={beforeSend:function(g){if(e==1){COM_TOOLS.loadingShade.open(0,b)}else{if(e==2){COM_TOOLS.loadingBtn.open(b)}}$.type(f.beforeSend)=="function"&&f.beforeSend(g)},complete:function(g,h){setTimeout(function(){if(e==1){COM_TOOLS.loadingShade.close()}else{if(e==2){COM_TOOLS.loadingBtn.close(b)}}},300);$.type(f.complete)=="function"&&f.complete(g,h)}};var c={dataType:"json"};$.extend(true,c,f,a);return $.ajax(c)},_view:{setInputStatus:function(e,d){if(e){e=typeof(e)==="string"?$(e):e;if(e.length>0){var j=e.parent();var c=j.hasClass("input-group");var h=c?j.next(".form-control-feedback"):e.next(".form-control-feedback");var a=c?j.parent():j;a.removeClass("has-success has-warning has-error has-feedback");if(h.length){h.remove()}var g="";switch(d){case"success":a.addClass("has-feedback has-success");g='<span class="glyphicon glyphicon-ok form-control-feedback "></span>';break;case"warning":a.addClass("has-feedback has-warning");g='<span class="glyphicon glyphicon-warning-sign form-control-feedback "></span>';break;case"error":a.addClass("has-feedback has-error");g='<span class="glyphicon glyphicon-remove form-control-feedback "></span>';break;default:g="";break}if(g){if(c){var i=$(g);var f=e.nextAll(".input-group-btn, .input-group-addon");if(f.length){var b=0;$.each(f,function(k,l){b+=$(l).outerWidth()});i.css("right",b+15+"px")}j.after(i)}else{e.after($(g))}}}}},cusPopover:function(g,b,f,d){var c={container:"body",placement:"bottom",content:"",trigger:"click",width:"",html:true,title:'<button type="btn" class="btn btn-warning btn-sm cus-pop-close" onclick="javascript:$(\'#'+g+"').trigger('click')\"><i class=\"glyphicon glyphicon-chevron-up\"></i></button>"};var a="",e="";if($.type(b)=="object"){a=$(b.content);b.content=a.html();$.extend(c,b)}$("#"+g).popover({html:c.html,container:c.container,placement:c.placement,content:c.content,trigger:c.trigger,title:c.title,template:'<div class="popover cus-popover-box2" role="tooltip"><div class="arrow"></div><h3 class="popover-title text-right"></h3><div class="popover-content"></div></div>',}).on("show.bs.popover",function(){$(this).find("i").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up");e=$("<div>").hide().insertBefore(a);a.remove()}).on("shown.bs.popover",function(){(typeof f=="function")&&f(g)}).on("hidden.bs.popover",function(){$(this).find("i").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down");e.replaceWith(a);(typeof d=="function")&&d(g)}).on("inserted.bs.popover",function(){if(c.width){$("#"+$(this).attr("aria-describedby")).css({width:c.width,"max-width":"none"})}})},cusHighSearch:function(a){$("#"+a).on("click",".js-highsearch-btn",function(){var b=$(this);if(!b.data("isload")){b.siblings(".js-moreSearchBox").load(b.data("itemurl"),function(){b.data("isload",true)})}}).on("click",".js-moreSearchBox",function(){return false})},noviceGuide:'<div class="popover cus-step-popover-box" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div><div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; '+LOCAL_MESSAGE_DATA["platform.plugin.msg.prevStep"]+'</button> <button class="btn btn-sm btn-default" data-role="next">'+LOCAL_MESSAGE_DATA["platform.plugin.msg.nextStep"]+' &raquo;</button><button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="Pause" data-resume-text="Resume">'+LOCAL_MESSAGE_DATA["platform.plugin.msg.pause"]+'</button> </div> <button class="btn btn-sm btn-default" data-role="end">'+LOCAL_MESSAGE_DATA["platform.plugin.msg.end"]+"</button> </div> </div>",tabScrollFn:{dom_:{ul_:$([]),overBox_:$([]),},sumWidth:function(b){var a=0;$(b).each(function(){a+=$(this).outerWidth()});return a},scrollTabLeft:function(){var d=Math.abs(parseInt(this.dom_.ul_.css("margin-left"))),b=this.dom_.overBox_.width(),e=0;if(this.dom_.ul_.width()<b){return false}else{var a=this.dom_.ul_.find("li:first"),c=0;while((c+$(a).outerWidth())<=d){c+=$(a).outerWidth();a=$(a).next()}c=0;if(this.sumWidth($(a).prevAll())>b){while((c+$(a).outerWidth())<(b)&&a.length>0){c+=$(a).outerWidth();a=$(a).prev()}e=this.sumWidth($(a).prevAll())}}this.dom_.ul_.animate({marginLeft:0-e+"px"},"fast")},scrollTabRight:function(){var d=Math.abs(parseInt(this.dom_.ul_.css("margin-left"))),b=this.dom_.overBox_.width(),e=0;if(this.dom_.ul_.width()<b){return false}else{var a=this.dom_.ul_.find("li:first"),c=0;while((c+$(a).outerWidth())<=d){c+=$(a).outerWidth();a=$(a).next()}if(c<(this.dom_.ul_.outerWidth()-b)){c=0;while((c+$(a).outerWidth())<(b)&&a.length>0){c+=$(a).outerWidth();a=$(a).next()}}e=this.sumWidth($(a).prevAll());if(e>0){this.dom_.ul_.animate({marginLeft:0-e+"px"},"fast")}}},scrollToTab:function(c){var d=this.sumWidth($(c).prevAll()),f=this.sumWidth($(c).nextAll()),b=this.dom_.overBox_.width(),e=0;if(this.dom_.ul_.outerWidth()<b){e=0}else{if(f<=(b-($(c).outerWidth()+$(c).next().outerWidth()))){if((b-$(c).next().outerWidth())>f){e=d;var a=c;while((e-$(a).outerWidth())>=(this.dom_.ul_.outerWidth()-b)){e-=$(a).prev().outerWidth();a=$(a).prev()}}}else{if(d>(b-($(c).outerWidth()+$(c).prev().outerWidth()))){e=d-$(c).prev().outerWidth()}}}this.dom_.ul_.animate({marginLeft:0-e+"px"},"fast")},init:function(a){var b=$(a),c=this;this.dom_={ul_:b.find(".tab-list-ul"),overBox_:b.find(".tab-list-overflow")};b.on("click",".tab-list-ul li",function(){c.scrollToTab($(this))}).on("click",".tab-left-btn",function(){c.scrollTabLeft()}).on("click",".tab-right-btn",function(){c.scrollTabRight()})}}},_model:{set_i18n_fn:function(b,g,e){if(!b||!g||!e){return false}var f='<div class="js-cus-tabmodel-box" id="js_cus_tabmodel_box"><div class="cus-tabmodel-box"><div class="tab-list-box js-tab-list-box"><button class="roll-nav roll-left tab-roll-btn tab-left-btn btn-primary"><i class="fa fa-backward"></i></button><div class="tab-list-overflow"><div class="tab-list-bar"><ul class="nav nav-tabs tab-list-ul pull-left js-create-tab" role="tablist"></ul></div></div><button class="roll-nav roll-right tab-roll-btn tab-right-btn btn-primary"><i class="fa fa-forward"></i></button></div><div class="cus-tabmodel-btns"><button class="btn btn-primary btn-sm js-cus-btn-save js-helpmsg" type="button" data-helpmsg="platform.common.msg.tab_this" data-helpdata="'+TEDU_MESSAGE.get("platform.common.btn.save")+'"><i class="glyphicon glyphicon-floppy-disk"></i> '+TEDU_MESSAGE.get("platform.common.btn.save")+'</button> <button class="btn btn-warning btn-sm js-cus-btn-refresh" type="button"><i class="glyphicon glyphicon-refresh"></i> '+TEDU_MESSAGE.get("platform.common.btn.fresh")+'</button></div></div><div class="tab-content cus-tabmodel-contbox js-create-content"></div></div>';$("#"+b).html(f);var k=$("#js_cus_tabmodel_box"),d=k.find(".js-create-tab"),a=k.find(".js-create-content");function h(){COM_TOOLS.ajaxFn({url:g,type:"GET",success:function(l){if(l&&$.type(l)=="array"){$.each(l,function(m,o){c(m,o)});i()}}},2,k.find(".js-cus-btn-refresh"))}h();function c(n,p){var o=p.pid.replace(/\./g,"_");var m='<li role="presentation" class="'+(n==0?"active":"")+'"><a href="#js_tab_'+o+'" role="tab" data-toggle="tab">'+p.name+"</a></li>";var l='<div role="tabpanel" class="tab-pane '+(n==0?"active":"")+'" id="js_tab_'+o+'" data-pid="'+p.pid+'">'+j(p.child)+"</div>";d.append(m);a.append(l)}function j(m){if($.type(m)=="array"&&m.length>0){var l=[];l.push('<div class="form-horizontal">');$.each(m,function(o,n){l.push('<div class="form-group" data-dcode="',n.code,'">');l.push('<label class="col-sm-2 col-md-offset-2 control-label">',(n.required=="1"?'<span class="text-danger">*</span> ':""),n.name,"</label>");l.push('<div class="col-sm-5"><input class="form-control input-sm js-input-val" type="text" value="',n.value,'" ',(n.required=="1"?'required="required"':""),"/></div>");l.push("</div>")});l.push("</div>");return l.join("")}else{return""}}function i(){a.find("input.js-input-val[required]").on("blur",function(){if($.trim($(this).val())==""){COM_TOOLS._view.setInputStatus($(this),"error")}else{COM_TOOLS._view.setInputStatus($(this),"")}})}k.find(".js-cus-btn-save").click(function(){var l=$(this);COM_TOOLS.confirm(TEDU_MESSAGE.get("platform.common.msg.tab_separate"),function(p){layer.close(p);var q=k.find(".js-create-content .tab-pane.active");var r=q.data("pid")||"";var o=q.find(".form-group");var n=[],m=false;o.each(function(){var t=$(this),s=t.find("input.js-input-val");if(s.prop("required")&&$.trim(s.val())==""){m=true}n.push({cCode:t.data("dcode"),lCode:r,name:$.trim(s.val())})});if(!m){COM_TOOLS.ajaxFn({url:e,type:"POST",data:{data:JSON.stringify(n)},success:function(s){if(s.code=="1"){COM_TOOLS.alert(TEDU_MESSAGE.get("platform.common.msg.success"))}else{if(s.code=="-2"){COM_TOOLS.alert(TEDU_MESSAGE.get("platform.common.msg.china_notnull"))}else{COM_TOOLS.alert(TEDU_MESSAGE.get("platform.common.msg.defeated"))}}}},2,l)}else{COM_TOOLS.alert(TEDU_MESSAGE.get("platform.common.msg.defeated"))}})}).end().find(".js-cus-btn-refresh").click(function(){d.html("");a.html("");h()});COM_TOOLS._view.tabScrollFn.init("#js_cus_tabmodel_box .js-tab-list-box")}}};COM_TOOLS.initjSDefaultOpt("ALL");